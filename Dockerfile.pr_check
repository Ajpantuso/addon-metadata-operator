FROM golang:1.16

USER root

WORKDIR /addon-metadata-operator

# Cache optimization
COPY go.mod go.sum ./
RUN go mod download

COPY . ./

ENTRYPOINT ["make"]

CMD ["check", "test", "build"]
